<script src=https://unpkg.com/lodash@4.17.21/lodash.min.js></script><script src=https://cdn.jsdelivr.net/npm/slugify@1.6.6/slugify.min.js></script><script src=https://raw.githack.com/viniciusofp/datacenter-municipios-intercept/refs/heads/main/data.js></script><script type=module>import { createApp } from 'https://unpkg.com/petite-vue?module';
        const parsedMunicipios = municipios.map(m => ({
              id: m[0],
              nome: m[1],
              uf: m[2],
              populacao: m[3]
            }))
          createApp({
            municipiosData: parsedMunicipios,
            filteredMunicipios: _.orderBy(parsedMunicipios, ['populacao'], ['desc']),
            showList: true,
            input: '',
            selectedMunicipio: null,
            update: _.debounce(function (e) {
              if (e.target.value) {
                this.filterMunicipios(e.target.value);
              } else {
                this.filteredMunicipios = _.orderBy(parsedMunicipios, ['populacao'], ['desc']);
              }
              this.input = e.target.value;
              this.scrollListToTop()
            }, 100),
            scrollListToTop() {
              let el = document.getElementById('municipiosList');
              el.scrollTop = 0
            },
            filterMunicipios(value) {
                const filter = this.municipiosData.filter((mun) => {

                return (slugify(mun.nome, { lower: true, replacement: '' }) +  slugify(mun.uf, { lower: true, replacement: '' })).includes(
                  slugify(value, { lower: true, replacement: '' })
                );
              });
              this.filteredMunicipios = _.orderBy(filter, ['populacao'], ['desc'])
            },
            formatNumber(value) {
              if (parseInt(value) >= 1e6) {
                return `${Math.floor(parseInt(value) / 1e6)} ${Math.floor(parseInt(value) / 1e6) > 1 ? 'milhões' : 'milhão'} e ${Math.floor(parseInt(value % 1e6) / 1e3)} mil`
              }
              if (parseInt(value) > 1e3) {
                return (parseInt(value) / 1e3).toFixed(0) + ' mil'
              }
              return parseInt(value).toLocaleString()
            },
            setShowList: function () {
              this.showList = true;
              
            },
            selectMunicipio(value) {
              this.input = `${value.nome} - ${value.uf}`;
              this.selectedMunicipio = value;
              this.showList = false
            },
            posicaoMunicipio(mun) {
              let posicao = _.indexOf(_.orderBy(this.municipiosData, ['populacao'], ['desc']), mun)
              if (posicao <= 19) {
                return `é a ${ordinais[posicao]} cidade com maior população no Brasil`
              } 
              
              let posicaoNoEstado = _.indexOf(_.orderBy(this.municipiosData.filter(m => m.uf === mun.uf), ['populacao'], ['desc']), mun)
              if (posicaoNoEstado <= 9) {
                return `é a ${ordinais[posicaoNoEstado]} cidade com maior população do estado ${ufs[mun.uf][1]} ${ufs[mun.uf][0]}`
              }
              return `é considerada uma cidade ${parseInt(this.selectedMunicipio.populacao) > 499999 ? 'grande' : parseInt(this.selectedMunicipio.populacao) > 99999 ? 'média' : 'pequena'}`
                
              },
              proporcao() {
                const ratio = consumoAnualDC /(ufs[this.selectedMunicipio.uf][2] * this.selectedMunicipio.populacao)
                const totalDays = Math.round(360 * ratio)
                const yearsSpent =  Math.floor(totalDays / 360)
                const monthsSpent = Math.floor((totalDays % 360) / 30)
                const daysSpent = (totalDays % 30)
                return  `${yearsSpent} anos ${monthsSpent} meses ${daysSpent} dias `
              },
              totalEstado(mun) {
                return this.formatNumber(_.sum(this.municipiosData.filter(m => m.uf === mun.uf).map(m => m.populacao)))
              }
          }).mount('#dataviz');</script><div class="border-8 border-[#6653ff] max-w-2xl mx-auto my-8 px-6 py-10 text-[20px]"id=dataviz><p class="font-actu font-bold text-2xl mb-4 md:text-3xl text-[#6653ff]">Quanto tempo sua cidade levaria para consumir a energia que o data center do TikTok consome em um ano??<p class=mb-5>Insira uma cidade na busca abaixo e confira.<div class=relative><svg class="absolute h-6 left-3 lucide lucide-search lucide-search-icon opacity-50 search-icon top-5 w-6"data-v-3bab6120=""fill=none height=24 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 viewBox="0 0 24 24"width=24 xmlns=http://www.w3.org/2000/svg><path d="m21 21-4.34-4.34"></path><circle cx=11 cy=11 r=8></circle></svg> <input :value=input @focus=setShowList @input=update class="border border-[#111] w-full flex focus:outline-[#6653ff] focus:ring-black font-actu-mono h-16 items-center leading-0 pl-12 px-3 text-base"placeholder="Digite o nome da sua cidade"><ul class="border border-[#111] w-full bg-white border-t-0 left-0 lg:max-h-42 max-h-32 overflow-y-auto shadow-md sm:shadow-lg"id=municipiosList v-if="showList && filteredMunicipios !== null"><li :class="{'text-[#6653ff]': selectedMunicipio.id === item.id}":key=item.id @click=selectMunicipio(item) class="font-actu-mono px-3 cursor-pointer duration-150 hover:bg-neutral-200 py-1.5 text-sm tracking-wide"v-for="item in filteredMunicipios.slice(0,50)">{{ item.nome }} - {{item.uf}}</ul></div><article class=mt-16 v-if="selectedMunicipio !== null"><h2 class="font-actu font-bold text-2xl flex gap-4 items-center lg:mb-5 lg:text-3xl mb-3 text-[#111]"><span class="bg-[#111] h-[24px] w-[70px]"></span><span>{{selectedMunicipio.nome}} <span class=font-normal>- {{ufs[selectedMunicipio.uf][0]}}</span></span></h2><p class=mb-3>Tem uma população de <strong>{{formatNumber(selectedMunicipio.populacao)}}</strong> pessoas e {{posicaoMunicipio(selectedMunicipio)}}.<p class=mb-3>O que o data center do TikTok vai consumir em um ano, {{selectedMunicipio.nome}} gasta em<p class="font-actu font-bold text-2xl text=[#111]">{{proporcao()}}</article></div><style>/*! tailwindcss v4.1.11 | MIT License | https://tailwindcss.com */@layer properties;@layer base{color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;-webkit-text-decoration:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:var(--default-mono-font-family, ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace);font-feature-settings:var(--default-mono-font-feature-settings,normal);font-variation-settings:var(--default-mono-font-variation-settings,normal);font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}:-moz-focusring{outline:auto}progress{vertical-align:baseline}summary{display:list-item}menu,ol,ul{list-style:none}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}::file-selector-button,button,input,optgroup,select,textarea{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;border-radius:0;background-color:transparent;opacity:1}:where(select:is([multiple],[size])) optgroup{font-weight:bolder}:where(select:is([multiple],[size])) optgroup option{padding-inline-start:20px}::file-selector-button{margin-inline-end:4px}::placeholder{opacity:1}@supports (not (-webkit-appearance:-apple-pay-button)) or (contain-intrinsic-size:1px){::placeholder{color:currentcolor}}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-date-and-time-value{min-height:1lh;text-align:inherit}::-webkit-datetime-edit{display:inline-flex}::-webkit-datetime-edit-fields-wrapper{padding:0}::-webkit-datetime-edit,::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-meridiem-field,::-webkit-datetime-edit-millisecond-field,::-webkit-datetime-edit-minute-field,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-second-field,::-webkit-datetime-edit-year-field{padding-block:0}:-moz-ui-invalid{box-shadow:none}::file-selector-button,button,input:where([type=button],[type=reset],[type=submit]){appearance:button}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[hidden]:where(:not([hidden=until-found])){display:none!important}.relative{position:relative}.top-5{top:calc(var(--spacing) * 5)}.left-0{left:calc(var(--spacing) * 0)}.left-3{left:calc(var(--spacing) * 3)}.mx-auto{margin-inline:auto}.my-3{margin-block:calc(var(--spacing) * 3)}.my-8{margin-block:calc(var(--spacing) * 8)}.mt-16{margin-top:calc(var(--spacing) * 16)}.mb-3{margin-bottom:calc(var(--spacing) * 3)}.mb-4{margin-bottom:calc(var(--spacing) * 4)}.mb-5{margin-bottom:calc(var(--spacing) * 5)}.flex{display:flex}.grid{display:grid}.h-6{height:calc(var(--spacing) * 6)}.h-16{height:calc(var(--spacing) * 16)}.h-\[24px\]{height:24px}.max-h-32{max-height:calc(var(--spacing) * 32)}.w-6{width:calc(var(--spacing) * 6)}.w-\[70px\]{width:70px}.w-full{width:100%}.max-w-2xl{max-width:var(--container-2xl)}.shrink-0{flex-shrink:0}.cursor-pointer{cursor:pointer}.flex-row{flex-direction:row}.items-center{align-items:center}.gap-4{gap:calc(var(--spacing) * 4)}.gap-5{gap:calc(var(--spacing) * 5)}.overflow-y-auto{overflow-y:auto}.border{border-style:var(--tw-border-style);border-width:1px}.border-8{border-style:var(--tw-border-style);border-width:8px}.border-t-0{border-top-style:var(--tw-border-style);border-top-width:0}.border-\[\#111\]{border-color:#111}.border-\[\#6653ff\]{border-color:#6653ff}.bg-\[\#111\]{background-color:#111}.bg-white{background-color:var(--color-white)}.px-3{padding-inline:calc(var(--spacing) * 3)}.px-6{padding-inline:calc(var(--spacing) * 6)}.py-1\.5{padding-block:calc(var(--spacing) * 1.5)}.py-10{padding-block:calc(var(--spacing) * 10)}.pl-12{padding-left:calc(var(--spacing) * 12)}.text-2xl{font-size:var(--text-2xl);line-height:var(--tw-leading,var(--text-2xl--line-height))}.text-3xl{font-size:var(--text-3xl);line-height:var(--tw-leading,var(--text-3xl--line-height))}.text-base{font-size:var(--text-base);line-height:var(--tw-leading,var(--text-base--line-height))}.text-sm{font-size:var(--text-sm);line-height:var(--tw-leading,var(--text-sm--line-height))}.text-\[20px\]{font-size:20px}.leading-0{--tw-leading:calc(var(--spacing) * 0);line-height:calc(var(--spacing) * 0)}.font-bold{--tw-font-weight:var(--font-weight-bold);font-weight:var(--font-weight-bold)}.font-extrabold{--tw-font-weight:var(--font-weight-extrabold);font-weight:var(--font-weight-extrabold)}.font-normal{--tw-font-weight:var(--font-weight-normal);font-weight:var(--font-weight-normal)}.tracking-wide{--tw-tracking:var(--tracking-wide);letter-spacing:var(--tracking-wide)}.text-pretty{text-wrap:pretty}.text-\[\#111\]{color:#111}.text-\[\#6653ff\]{color:#6653ff}.opacity-50{opacity:50%}.shadow-md{--tw-shadow:0 4px 6px -1px var(--tw-shadow-color, rgb(0 0 0 / 0.1)),0 2px 4px -2px var(--tw-shadow-color, rgb(0 0 0 / 0.1));box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.filter{filter:var(--tw-blur,) var(--tw-brightness,) var(--tw-contrast,) var(--tw-grayscale,) var(--tw-hue-rotate,) var(--tw-invert,) var(--tw-saturate,) var(--tw-sepia,) var(--tw-drop-shadow,)}.duration-150{--tw-duration:150ms;transition-duration:150ms}.sm\:shadow-lg{box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}@font-face{font-family:'TI Actu';font-weight:800;font-style:normal;src:url(font/TIActuBeta-ExBold.woff)}@font-face{font-family:'TI Actu';font-weight:400;font-style:normal;src:url(font/TIActuBeta-Regular.woff)}@font-face{font-family:'TI Actu Mono';font-weight:400;font-style:normal;src:url(font/TIActuBetaMono-Regular.woff)}body{font-family:Newsreader,Arial,Georgia,serif;line-height:1.545454;color:#333}.font-actu{font-family:'TI Actu'}.font-actu-mono{font-family:'TI Actu Mono'}.newsreader-light{font-family:Newsreader,Georgia,serif;font-optical-sizing:auto;font-weight:400;font-style:normal}@property --tw-border-style{syntax:"*";inherits:false;initial-value:solid}@property --tw-leading{syntax:"*";inherits:false}@property --tw-font-weight{syntax:"*";inherits:false}@property --tw-tracking{syntax:"*";inherits:false}@property --tw-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-shadow-color{syntax:"*";inherits:false}@property --tw-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-inset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-inset-shadow-color{syntax:"*";inherits:false}@property --tw-inset-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-ring-color{syntax:"*";inherits:false}@property --tw-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-inset-ring-color{syntax:"*";inherits:false}@property --tw-inset-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-ring-inset{syntax:"*";inherits:false}@property --tw-ring-offset-width{syntax:"<length>";inherits:false;initial-value:0}@property --tw-ring-offset-color{syntax:"*";inherits:false;initial-value:#fff}@property --tw-ring-offset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-blur{syntax:"*";inherits:false}@property --tw-brightness{syntax:"*";inherits:false}@property --tw-contrast{syntax:"*";inherits:false}@property --tw-grayscale{syntax:"*";inherits:false}@property --tw-hue-rotate{syntax:"*";inherits:false}@property --tw-invert{syntax:"*";inherits:false}@property --tw-opacity{syntax:"*";inherits:false}@property --tw-saturate{syntax:"*";inherits:false}@property --tw-sepia{syntax:"*";inherits:false}@property --tw-drop-shadow{syntax:"*";inherits:false}@property --tw-drop-shadow-color{syntax:"*";inherits:false}@property --tw-drop-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-drop-shadow-size{syntax:"*";inherits:false}@property --tw-duration{syntax:"*";inherits:false}</style>